<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta content="no-cache,must-revalidate" http-equiv="Cache-Control">
		<meta content="no-cache" http-equiv="pragma">
		<meta content="0" http-equiv="expires">
		<meta content="telephone=no, address=no" name="format-detection">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="user-scalable=no, width=device-width,initial-scale=0.5, minimum-scale=1.0, maximum-scale=1.0">
		<meta content="no" name="apple-mobile-web-app-capable" />
		<meta content="false" id="twcClient" name="twcClient" />

		<link rel="stylesheet" type="text/css" href="css/common.css">

		<title>兑换记录</title>
	</head>

	<body>

		<div style="height:20px;"></div>
		<div class="hot-tj-title">
			<p>兑换记录</p>
		</div>

		<div style="height:20px;"></div>

		<div class="lq-list-box">
			<div class="lq-list-top">
				<p>看看积分是怎么花掉的......</p>
			</div>
			<ul class="lq-list" id="model-parent">

				<li id="model">
					<div class="list-r">
						<p><span class="nicheng-txt"></span><span class="time-txt">07/16&nbsp;&nbsp;09:26:34</span></p>
						<p class="message-txt"></p>
					</div>
					<div class="clear"></div>
				</li>
			</ul>
		</div>
		<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
		<script type="text/javascript" src="js/jquery.cookie.js"></script>
		<script type="text/javascript" src="js/mui.min.js"></script>

		<script>
			$(document).ready(function() {
				$("#model").hide();
				//http://www.yearcontest.com/shop/order/getorder/123
				var url = $.cookie("domain") + "shop/order/getorder/" + $.cookie("openid");
				$.getJSON(url, function(result) {

					if(result.status != 1) {
						alert(result.msg);
						return;
					}
					addData(result.data);

				});

				function addData(list) {
					console.log(JSON.stringify(list));
					for(var i in list) {
						var order = list[i];
						var $model = $("#model").clone().show();

						$model.find(".nicheng-txt").html(order.productSimplename);

						$model.find(".message-txt").html("-" + order.amountPaid);
						var orderTime = datetimeFormat_1(order.payTime);
						$model.find(".time-txt").html(orderTime);
						$model.appendTo("#model-parent");

					}

				}

				function datetimeFormat(longTypeDate) {
					var datetimeType = "";
					var date = new Date();
					date.setTime(longTypeDate);
					datetimeType = date.getFullYear() + "-" + getMonth(date) + "-" + getDay(date) + "&nbsp;" + getHours(date) + ":" + getMinutes(date) + ":" + getSeconds(date); //yyyy-MM-dd 00:00:00格式日期
					return datetimeType;
				}

				function datetimeFormat_1(longTypeDate) {
					var datetimeType = "";
					var date = new Date();
					date.setTime(longTypeDate);
					datetimeType += date.getFullYear(); //年 
					datetimeType += "-" + getMonth(date); //月  
					datetimeType += "-" + getDay(date); //日 
					datetimeType += "  " + getHours(date); //时 
					datetimeType += ":" + getMinutes(date); //分
					datetimeType += ":" + getSeconds(date); //分
					return datetimeType;
				}
				//返回 01-12 的月份值  
				function getMonth(date) {
					var month = "";
					month = date.getMonth() + 1; //getMonth()得到的月份是0-11 
					if(month < 10) {
						month = "0" + month;
					}
					return month;
				}
				//返回01-30的日期 
				function getDay(date) {
					var day = "";
					day = date.getDate();
					if(day < 10) {
						day = "0" + day;
					}
					return day;
				}
				//返回小时
				function getHours(date) {
					var hours = "";
					hours = date.getHours();
					if(hours < 10) {
						hours = "0" + hours;
					}
					return hours;
				}
				//返回分
				function getMinutes(date) {
					var minute = "";
					minute = date.getMinutes();
					if(minute < 10) {
						minute = "0" + minute;
					}
					return minute;
				}
				//返回秒
				function getSeconds(date) {
					var second = "";
					second = date.getSeconds();
					if(second < 10) {
						second = "0" + second;
					}
					return second;
				}
			});
		</script>
	</body>

</html>